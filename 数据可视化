<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®å¯è§†åŒ–å¹³å°</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            color: white;
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.2rem;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-tab {
            background: rgba(255,255,255,0.1);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: rgba(255,255,255,0.9);
            color: #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .chart-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
            transform: translateY(30px);
        }

        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .chart-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4rem;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .data-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .data-controls button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .data-controls button:hover {
            background: #5a6fd8;
            transform: scale(1.05);
        }

        .upload-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .upload-section h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .upload-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* ç¬¬3ç« å›¾è¡¨æ ·å¼ */
        .chapter3-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }

        .chapter3-chart {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .chapter3-chart h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .chapter3-controls {
            margin-top: 15px;
        }

        .chapter3-controls label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }

        .chapter3-controls input[type="range"] {
            width: 100%;
            margin-bottom: 10px;
        }

        .chapter3-controls .value-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #777;
        }

        .chapter3-button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .chapter3-button-group button {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            background: #667eea;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chapter3-button-group button:hover {
            background: #5a6fd8;
        }

        .chapter3-button-group button.reset {
            background: #ff6b6b;
        }

        .chapter3-button-group button.reset:hover {
            background: #ff5252;
        }

        .chapter3-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .chapter3-table th, .chapter3-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .chapter3-table th {
            background-color: #f1f3f5;
            font-weight: 600;
        }

        .chapter3-table input {
            width: 100%;
            padding: 4px 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š æ•°æ®å¯è§†åŒ–å¹³å°</h1>
            <p>æ¢ç´¢äº”ç§ç»å…¸æ•°æ®å¯è§†åŒ–å›¾å½¢åŠç¬¬3ç« äº¤äº’å¼å›¾è¡¨</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showAllCharts()">å…¨éƒ¨å›¾è¡¨</button>
            <button class="nav-tab" onclick="showChart('line')">æŠ˜çº¿å›¾</button>
            <button class="nav-tab" onclick="showChart('bar')">æŸ±å½¢å›¾</button>
            <button class="nav-tab" onclick="showChart('pie')">é¥¼å›¾</button>
            <button class="nav-tab" onclick="showChart('scatter')">æ•£ç‚¹å›¾</button>
            <button class="nav-tab" onclick="showChart('histogram')">ç›´æ–¹å›¾</button>
            <button class="nav-tab" onclick="showChart('chapter3')">ç¬¬3ç« å›¾è¡¨</button>
        </div>

        <div class="chart-grid">
            <!-- æŠ˜çº¿å›¾ -->
            <div class="chart-card" data-type="line">
                <h3>ğŸ“ˆ æŠ˜çº¿å›¾ - æ°”æ¸©å˜åŒ–è¶‹åŠ¿</h3>
                <div class="chart-container">
                    <canvas id="lineChart"></canvas>
                </div>
                <div class="data-controls">
                    <button onclick="updateLineChart('temperature')">æ°”æ¸©æ•°æ®</button>
                    <button onclick="updateLineChart('sales')">é”€å”®æ•°æ®</button>
                    <button onclick="updateLineChart('random')">éšæœºæ•°æ®</button>
                </div>
            </div>

            <!-- æŸ±å½¢å›¾ -->
            <div class="chart-card" data-type="bar">
                <h3>ğŸ“Š æŸ±å½¢å›¾ - å•†å“é”€å”®å¯¹æ¯”</h3>
                <div class="chart-container">
                    <canvas id="barChart"></canvas>
                </div>
                <div class="data-controls">
                    <button onclick="updateBarChart('sales')">é”€å”®æ•°æ®</button>
                    <button onclick="updateBarChart('revenue')">æ”¶å…¥æ•°æ®</button>
                    <button onclick="updateBarChart('users')">ç”¨æˆ·æ•°æ®</button>
                </div>
            </div>

            <!-- é¥¼å›¾ -->
            <div class="chart-card" data-type="pie">
                <h3>ğŸ¥§ é¥¼å›¾ - é¢„ç®—åˆ†é…æ¯”ä¾‹</h3>
                <div class="chart-container">
                    <canvas id="pieChart"></canvas>
                </div>
                <div class="data-controls">
                    <button onclick="updatePieChart('budget')">é¢„ç®—åˆ†é…</button>
                    <button onclick="updatePieChart('market')">å¸‚åœºä»½é¢</button>
                    <button onclick="updatePieChart('time')">æ—¶é—´åˆ†é…</button>
                </div>
            </div>

            <!-- æ•£ç‚¹å›¾ -->
            <div class="chart-card" data-type="scatter">
                <h3>ğŸ”µ æ•£ç‚¹å›¾ - å˜é‡ç›¸å…³æ€§åˆ†æ</h3>
                <div class="chart-container">
                    <canvas id="scatterChart"></canvas>
                </div>
                <div class="data-controls">
                    <button onclick="updateScatterChart('correlation')">æ­£ç›¸å…³</button>
                    <button onclick="updateScatterChart('negative')">è´Ÿç›¸å…³</button>
                    <button onclick="updateScatterChart('random')">éšæœºåˆ†å¸ƒ</button>
                </div>
            </div>

            <!-- ç›´æ–¹å›¾ -->
            <div class="chart-card" data-type="histogram">
                <h3>ğŸ“‹ ç›´æ–¹å›¾ - æ•°æ®åˆ†å¸ƒæƒ…å†µ</h3>
                <div class="chart-container">
                    <canvas id="histogramChart"></canvas>
                </div>
                <div class="data-controls">
                    <button onclick="updateHistogramChart('normal')">æ­£æ€åˆ†å¸ƒ</button>
                    <button onclick="updateHistogramChart('uniform')">å‡åŒ€åˆ†å¸ƒ</button>
                    <button onclick="updateHistogramChart('skewed')">åæ€åˆ†å¸ƒ</button>
                </div>
            </div>

            <!-- ç¬¬3ç« å›¾è¡¨ -->
            <div class="chart-card" data-type="chapter3" style="grid-column: 1 / -1;">
                <h3>ğŸ“š ç¬¬3ç«  - äº¤äº’å¼å›¾è¡¨</h3>
                <div class="chapter3-container">
                    <!-- æ­£å¼¦ä½™å¼¦å‡½æ•° -->
                    <div class="chapter3-chart">
                        <h4>æ­£å¼¦ä½™å¼¦å‡½æ•°</h4>
                        <div class="chart-container">
                            <canvas id="sineCosineChart"></canvas>
                        </div>
                        <div class="chapter3-controls">
                            <label for="frequency">é¢‘ç‡</label>
                            <input type="range" id="frequency" min="0.5" max="3" step="0.1" value="1">
                            <div class="value-display">
                                <span>0.5</span>
                                <span id="frequency-value">1</span>
                                <span>3</span>
                            </div>
                            
                            <label for="amplitude">æŒ¯å¹…</label>
                            <input type="range" id="amplitude" min="0.5" max="2" step="0.1" value="1">
                            <div class="value-display">
                                <span>0.5</span>
                                <span id="amplitude-value">1</span>
                                <span>2</span>
                            </div>
                            
                            <div class="chapter3-button-group">
                                <button id="animate-sine">æ’­æ”¾åŠ¨ç”»</button>
                                <button class="reset" id="reset-sine">é‡ç½®å‚æ•°</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å¸¦åˆ»åº¦çš„å‡½æ•°å›¾ -->
                    <div class="chapter3-chart">
                        <h4>å¸¦åˆ»åº¦çš„å‡½æ•°å›¾</h4>
                        <div class="chart-container">
                            <canvas id="labeledChart"></canvas>
                        </div>
                        <div class="chapter3-controls">
                            <label for="x-min">Xè½´æœ€å°å€¼</label>
                            <input type="range" id="x-min" min="-5" max="-2" step="0.5" value="-3">
                            <div class="value-display">
                                <span>-5</span>
                                <span id="x-min-value">-3</span>
                                <span>-2</span>
                            </div>
                            
                            <label for="x-max">Xè½´æœ€å¤§å€¼</label>
                            <input type="range" id="x-max" min="2" max="5" step="0.5" value="3">
                            <div class="value-display">
                                <span>2</span>
                                <span id="x-max-value">3</span>
                                <span>5</span>
                            </div>
                            
                            <div class="chapter3-button-group">
                                <button id="animate-labels">æ’­æ”¾åŠ¨ç”»</button>
                                <button class="reset" id="reset-labels">é‡ç½®å‚æ•°</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ç”µå½±ç¥¨æˆ¿æ’è¡Œæ¦œ -->
                    <div class="chapter3-chart" style="grid-column: 1 / -1;">
                        <h4>ç”µå½±ç¥¨æˆ¿æ’è¡Œæ¦œ</h4>
                        <div class="chart-container">
                            <canvas id="movieChart"></canvas>
                        </div>
                        <div class="chapter3-controls">
                            <p>ç›´æ¥åœ¨ä¸‹æ–¹è¡¨æ ¼ä¸­ç¼–è¾‘ç¥¨æˆ¿æ•°æ®ï¼Œå›¾è¡¨å°†è‡ªåŠ¨æ›´æ–°</p>
                        </div>
                        
                        <table class="chapter3-table">
                            <thead>
                                <tr>
                                    <th>ç”µå½±åç§°</th>
                                    <th>ç¥¨æˆ¿(äº¿å…ƒ)</th>
                                </tr>
                            </thead>
                            <tbody id="movie-data">
                                <!-- æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </tbody>
                        </table>
                        
                        <div class="chapter3-button-group">
                            <button id="animate-movies">æ’­æ”¾åŠ¨ç”»</button>
                            <button class="reset" id="reset-movies">é‡ç½®æ•°æ®</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="upload-section">
            <h3>ğŸ“ ä¸Šä¼ æ‚¨çš„æ•°æ®æ–‡ä»¶</h3>
            <p>æ”¯æŒ CSVã€JSONã€Excel æ ¼å¼æ–‡ä»¶ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨</p>
            <input type="file" id="fileInput" accept=".csv,.json,.xlsx,.xls" style="display: none;">
            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                é€‰æ‹©æ–‡ä»¶ä¸Šä¼ 
            </button>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        let charts = {};

        // åŠ¨ç”»åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            animateCards();
            initializeCharts();
            initializeChapter3Charts();
        });

        function animateCards() {
            const cards = document.querySelectorAll('.chart-card');
            cards.forEach((card, index) => {
                anime({
                    targets: card,
                    opacity: [0, 1],
                    translateY: [30, 0],
                    duration: 800,
                    delay: index * 100,
                    easing: 'easeOutCubic'
                });
            });
        }

        function initializeCharts() {
            // æŠ˜çº¿å›¾
            charts.line = new Chart(document.getElementById('lineChart'), {
                type: 'line',
                data: getLineData('temperature'),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'æœªæ¥15å¤©æ°”æ¸©å˜åŒ–'
                        }
                    }
                }
            });

            // æŸ±å½¢å›¾
            charts.bar = new Chart(document.getElementById('barChart'), {
                type: 'bar',
                data: getBarData('sales'),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });

            // é¥¼å›¾
            charts.pie = new Chart(document.getElementById('pieChart'), {
                type: 'pie',
                data: getPieData('budget'),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });

            // æ•£ç‚¹å›¾
            charts.scatter = new Chart(document.getElementById('scatterChart'), {
                type: 'scatter',
                data: getScatterData('correlation'),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });

            // ç›´æ–¹å›¾
            charts.histogram = new Chart(document.getElementById('histogramChart'), {
                type: 'bar',
                data: getHistogramData('normal'),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æ•°å€¼åŒºé—´'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'é¢‘æ•°'
                            }
                        }
                    }
                }
            });
        }

        // ç¬¬3ç« å›¾è¡¨åˆå§‹åŒ–
        function initializeChapter3Charts() {
            // æ­£å¼¦ä½™å¼¦å›¾è¡¨
            charts.sineCosine = new Chart(document.getElementById('sineCosineChart'), {
                type: 'line',
                data: generateSineCosineData(1, 1),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'xè½´'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'yè½´'
                            },
                            min: -1.5,
                            max: 1.5
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // å¸¦åˆ»åº¦çš„å›¾è¡¨
            charts.labeled = new Chart(document.getElementById('labeledChart'), {
                type: 'line',
                data: generateSineCosineData(1, 1),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'xè½´'
                            },
                            min: -3,
                            max: 3,
                            ticks: {
                                callback: function(value) {
                                    const piValues = {
                                        '-3': '-Ï€',
                                        '-1.5': '-Ï€/2',
                                        '0': '0',
                                        '1.5': 'Ï€/2',
                                        '3': 'Ï€'
                                    };
                                    return piValues[value] || value;
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'yè½´'
                            },
                            min: -1.5,
                            max: 1.5
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });

            // ç”µå½±æ’è¡Œæ¦œå›¾è¡¨
            charts.movie = new Chart(document.getElementById('movieChart'), {
                type: 'bar',
                data: getMovieData(),
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: '2019å¹´å†…åœ°ç”µå½±ç¥¨æˆ¿æ’è¡Œæ¦œ'
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'æ€»ç¥¨æˆ¿(äº¿å…ƒ)'
                            },
                            beginAtZero: true
                        }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
            
            // å¡«å……è¡¨æ ¼
            populateMovieTable();
            
            // è®¾ç½®ç¬¬3ç« å›¾è¡¨æ§ä»¶
            setupChapter3Controls();
        }

        // æ•°æ®ç”Ÿæˆå‡½æ•°
        function getLineData(type) {
            const baseData = {
                labels: ['ç¬¬1å¤©', 'ç¬¬2å¤©', 'ç¬¬3å¤©', 'ç¬¬4å¤©', 'ç¬¬5å¤©', 'ç¬¬6å¤©', 'ç¬¬7å¤©', 
                        'ç¬¬8å¤©', 'ç¬¬9å¤©', 'ç¬¬10å¤©', 'ç¬¬11å¤©', 'ç¬¬12å¤©', 'ç¬¬13å¤©', 'ç¬¬14å¤©', 'ç¬¬15å¤©'],
                datasets: []
            };

            switch(type) {
                case 'temperature':
                    baseData.datasets = [
                        {
                            label: 'æœ€é«˜æ°”æ¸©',
                            data: [32, 33, 34, 34, 33, 31, 30, 29, 30, 29, 26, 23, 21, 25, 31],
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'æœ€ä½æ°”æ¸©',
                            data: [19, 19, 20, 22, 22, 21, 22, 16, 18, 18, 17, 14, 15, 16, 16],
                            borderColor: '#4ecdc4',
                            backgroundColor: 'rgba(78, 205, 196, 0.1)',
                            tension: 0.4
                        }
                    ];
                    break;
                case 'sales':
                    baseData.datasets = [{
                        label: 'é”€å”®é¢',
                        data: [120, 135, 145, 130, 160, 155, 170, 165, 180, 175, 190, 185, 200, 195, 210],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4
                    }];
                    break;
                default:
                    baseData.datasets = [{
                        label: 'éšæœºæ•°æ®',
                        data: Array(15).fill().map(() => Math.random() * 200 + 50),
                        borderColor: '#f093fb',
                        backgroundColor: 'rgba(240, 147, 251, 0.1)',
                        tension: 0.4
                    }];
            }
            return baseData;
        }

        function getBarData(type) {
            const labels = ['å•†å“A', 'å•†å“B', 'å•†å“C', 'å•†å“D', 'å•†å“E'];
            
            switch(type) {
                case 'sales':
                    return {
                        labels: labels,
                        datasets: [{
                            label: 'é”€å”®é‡',
                            data: [120, 150, 180, 90, 200],
                            backgroundColor: [
                                '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'
                            ]
                        }]
                    };
                case 'revenue':
                    return {
                        labels: labels,
                        datasets: [{
                            label: 'æ”¶å…¥',
                            data: [4500, 5200, 3800, 2900, 6100],
                            backgroundColor: [
                                '#ff9ff3', '#f368e0', '#00d2d3', '#54a0ff', '#5f27cd'
                            ]
                        }]
                    };
                default:
                    return {
                        labels: labels,
                        datasets: [{
                            label: 'ç”¨æˆ·æ•°',
                            data: [340, 280, 410, 190, 320],
                            backgroundColor: [
                                '#ff9f43', '#ee5253', '#0abde3', '#10ac84', '#5f27cd'
                            ]
                        }]
                    };
            }
        }

        function getPieData(type) {
            switch(type) {
                case 'budget':
                    return {
                        labels: ['æŠ€æœ¯ç ”å‘', 'å¸‚åœºè¥é”€', 'äººåŠ›èµ„æº', 'è¿è¥æˆæœ¬', 'å…¶ä»–'],
                        datasets: [{
                            data: [35, 25, 15, 20, 5],
                            backgroundColor: [
                                '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57'
                            ]
                        }]
                    };
                case 'market':
                    return {
                        labels: ['äº§å“A', 'äº§å“B', 'äº§å“C', 'å…¶ä»–'],
                        datasets: [{
                            data: [40, 30, 20, 10],
                            backgroundColor: [
                                '#ff9ff3', '#f368e0', '#00d2d3', '#54a0ff'
                            ]
                        }]
                    };
                default:
                    return {
                        labels: ['å·¥ä½œ', 'å­¦ä¹ ', 'å¨±ä¹', 'ä¼‘æ¯', 'å…¶ä»–'],
                        datasets: [{
                            data: [40, 25, 15, 15, 5],
                            backgroundColor: [
                                '#ff9f43', '#ee5253', '#0abde3', '#10ac84', '#5f27cd'
                            ]
                        }]
                    };
            }
        }

        function getScatterData(type) {
            let data = [];
            const count = 50;
            
            switch(type) {
                case 'correlation':
                    for (let i = 0; i < count; i++) {
                        const x = Math.random() * 100;
                        const y = x * 0.8 + Math.random() * 20;
                        data.push({x: x, y: y});
                    }
                    break;
                case 'negative':
                    for (let i = 0; i < count; i++) {
                        const x = Math.random() * 100;
                        const y = 100 - x * 0.8 + Math.random() * 20;
                        data.push({x: x, y: y});
                    }
                    break;
                default:
                    for (let i = 0; i < count; i++) {
                        data.push({
                            x: Math.random() * 100,
                            y: Math.random() * 100
                        });
                    }
            }

            return {
                datasets: [{
                    label: 'æ•°æ®ç‚¹',
                    data: data,
                    backgroundColor: 'rgba(102, 126, 234, 0.6)',
                    borderColor: 'rgba(102, 126, 234, 1)',
                    pointRadius: 6
                }]
            };
        }

        function getHistogramData(type) {
            let data = [];
            const bins = 8;
            
            switch(type) {
                case 'normal':
                    for (let i = 0; i < 1000; i++) {
                        data.push(gaussianRandom(50, 15));
                    }
                    break;
                case 'uniform':
                    for (let i = 0; i < 1000; i++) {
                        data.push(Math.random() * 100);
                    }
                    break;
                default:
                    for (let i = 0; i < 1000; i++) {
                        data.push(Math.pow(Math.random(), 2) * 100);
                    }
            }

            // è®¡ç®—ç›´æ–¹å›¾æ•°æ®
            const min = Math.min(...data);
            const max = Math.max(...data);
            const binSize = (max - min) / bins;
            const histogram = Array(bins).fill(0);
            
            data.forEach(value => {
                const binIndex = Math.min(Math.floor((value - min) / binSize), bins - 1);
                histogram[binIndex]++;
            });

            return {
                labels: Array(bins).fill().map((_, i) => {
                    const start = min + i * binSize;
                    const end = min + (i + 1) * binSize;
                    return `${start.toFixed(1)}-${end.toFixed(1)}`;
                }),
                datasets: [{
                    label: 'é¢‘æ•°',
                    data: histogram,
                    backgroundColor: '#4ecdc4'
                }]
            };
        }

        // ç¬¬3ç« æ•°æ®ç”Ÿæˆå‡½æ•°
        function generateSineCosineData(frequency, amplitude) {
            const x = [];
            const sin = [];
            const cos = [];
            
            for (let i = -Math.PI; i <= Math.PI; i += 0.1) {
                x.push(i);
                sin.push(amplitude * Math.sin(frequency * i));
                cos.push(amplitude * Math.cos(frequency * i));
            }
            
            return {
                labels: x,
                datasets: [
                    {
                        label: 'sin(x)',
                        data: sin,
                        borderColor: '#2575fc',
                        backgroundColor: 'rgba(37, 117, 252, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    },
                    {
                        label: 'cos(x)',
                        data: cos,
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }
                ]
            };
        }

        let movieData = [
            { name: "å“ªå’ä¹‹é­”ç«¥é™ä¸–", boxOffice: 48.57 },
            { name: "æµæµªåœ°çƒ", boxOffice: 46.18 },
            { name: "å¤ä»‡è€…è”ç›Ÿ4:ç»ˆå±€ä¹‹æˆ˜", boxOffice: 42.05 },
            { name: "ç–¯ç‹‚çš„å¤–æ˜Ÿäºº", boxOffice: 21.83 },
            { name: "é£é©°äººç”Ÿ", boxOffice: 17.03 },
            { name: "çƒˆç«è‹±é›„", boxOffice: 16.70 },
            { name: "èœ˜è››ä¾ :è‹±é›„è¿œå¾", boxOffice: 14.01 },
            { name: "é€Ÿåº¦ä¸æ¿€æƒ…:ç‰¹åˆ«è¡ŒåŠ¨", boxOffice: 13.84 },
            { name: "æ‰«æ¯’2å¤©åœ°å¯¹å†³", boxOffice: 12.85 },
            { name: "å¤§é»„èœ‚", boxOffice: 11.38 },
            { name: "æƒŠå¥‡é˜Ÿé•¿", boxOffice: 10.25 },
            { name: "æ¯”æ‚²ä¼¤æ›´æ‚²ä¼¤çš„æ•…äº‹", boxOffice: 9.46 },
            { name: "å“¥æ–¯æ‹‰2:æ€ªå…½ä¹‹ç‹", boxOffice: 9.27 },
            { name: "é˜¿ä¸½å¡”:æˆ˜æ–—å¤©ä½¿", boxOffice: 8.88 },
            { name: "é“¶æ²³è¡¥ä¹ ç­", boxOffice: 8.64 }
        ];
        
        function getMovieData() {
            // æ’åºæ•°æ®
            const sortedData = [...movieData].sort((a, b) => b.boxOffice - a.boxOffice);
            const labels = sortedData.map(movie => movie.name);
            const data = sortedData.map(movie => movie.boxOffice);
            
            return {
                labels: labels,
                datasets: [{
                    label: 'ç¥¨æˆ¿(äº¿å…ƒ)',
                    data: data,
                    backgroundColor: 'rgba(37, 117, 252, 0.7)',
                    borderColor: 'rgba(37, 117, 252, 1)',
                    borderWidth: 1
                }]
            };
        }
        
        function populateMovieTable() {
            const tableBody = document.getElementById('movie-data');
            tableBody.innerHTML = '';
            
            movieData.forEach((movie, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${movie.name}</td>
                    <td>
                        <input type="number" value="${movie.boxOffice}" step="0.01" min="0" 
                               data-index="${index}" class="box-office-input">
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // æ·»åŠ è¾“å…¥äº‹ä»¶ç›‘å¬å™¨
            document.querySelectorAll('.box-office-input').forEach(input => {
                input.addEventListener('input', updateMovieData);
            });
        }
        
        function updateMovieData() {
            const inputs = document.querySelectorAll('.box-office-input');
            inputs.forEach(input => {
                const index = parseInt(input.dataset.index);
                movieData[index].boxOffice = parseFloat(input.value) || 0;
            });
            
            updateMovieChart();
        }
        
        function updateMovieChart() {
            charts.movie.data = getMovieData();
            charts.movie.update();
        }

        // å·¥å…·å‡½æ•°
        function gaussianRandom(mean, std) {
            let u = 0, v = 0;
            while(u === 0) u = Math.random();
            while(v === 0) v = Math.random();
            return mean + std * Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
        }

        // å›¾è¡¨æ›´æ–°å‡½æ•°
        function updateLineChart(type) {
            charts.line.data = getLineData(type);
            charts.line.update();
        }

        function updateBarChart(type) {
            charts.bar.data = getBarData(type);
            charts.bar.update();
        }

        function updatePieChart(type) {
            charts.pie.data = getPieData(type);
            charts.pie.update();
        }

        function updateScatterChart(type) {
            charts.scatter.data = getScatterData(type);
            charts.scatter.update();
        }

        function updateHistogramChart(type) {
            charts.histogram.data = getHistogramData(type);
            charts.histogram.update();
        }

        // ç¬¬3ç« å›¾è¡¨æ§ä»¶è®¾ç½®
        function setupChapter3Controls() {
            // æ­£å¼¦ä½™å¼¦å›¾è¡¨æ§ä»¶
            const frequencySlider = document.getElementById('frequency');
            const amplitudeSlider = document.getElementById('amplitude');
            const frequencyValue = document.getElementById('frequency-value');
            const amplitudeValue = document.getElementById('amplitude-value');
            const animateSineBtn = document.getElementById('animate-sine');
            const resetSineBtn = document.getElementById('reset-sine');
            
            // æ›´æ–°æ˜¾ç¤ºå€¼
            frequencySlider.addEventListener('input', function() {
                frequencyValue.textContent = this.value;
            });
            
            amplitudeSlider.addEventListener('input', function() {
                amplitudeValue.textContent = this.value;
            });
            
            // æ›´æ–°å›¾è¡¨æ•°æ®
            function updateSineCosineChart() {
                const frequency = parseFloat(frequencySlider.value);
                const amplitude = parseFloat(amplitudeSlider.value);
                
                const data = generateSineCosineData(frequency, amplitude);
                
                charts.sineCosine.data = data;
                charts.sineCosine.update();
            }
            
            frequencySlider.addEventListener('input', updateSineCosineChart);
            amplitudeSlider.addEventListener('input', updateSineCosineChart);
            
            // åŠ¨ç”»æŒ‰é’®
            animateSineBtn.addEventListener('click', function() {
                const frequency = parseFloat(frequencySlider.value);
                const amplitude = parseFloat(amplitudeSlider.value);
                
                // ä½¿ç”¨anime.jsåˆ›å»ºåŠ¨ç”»æ•ˆæœ
                anime({
                    targets: [frequencySlider, amplitudeSlider],
                    value: [frequency * 1.5, amplitude * 1.5],
                    duration: 2000,
                    easing: 'easeInOutQuad',
                    round: 1,
                    update: function() {
                        updateSineCosineChart();
                    }
                });
            });
            
            // é‡ç½®æŒ‰é’®
            resetSineBtn.addEventListener('click', function() {
                frequencySlider.value = 1;
                amplitudeSlider.value = 1;
                frequencyValue.textContent = '1';
                amplitudeValue.textContent = '1';
                
                updateSineCosineChart();
            });
            
            // å¸¦åˆ»åº¦çš„å›¾è¡¨æ§ä»¶
            const xMinSlider = document.getElementById('x-min');
            const xMaxSlider = document.getElementById('x-max');
            const xMinValue = document.getElementById('x-min-value');
            const xMaxValue = document.getElementById('x-max-value');
            const animateLabelsBtn = document.getElementById('animate-labels');
            const resetLabelsBtn = document.getElementById('reset-labels');
            
            // æ›´æ–°æ˜¾ç¤ºå€¼
            xMinSlider.addEventListener('input', function() {
                xMinValue.textContent = this.value;
            });
            
            xMaxSlider.addEventListener('input', function() {
                xMaxValue.textContent = this.value;
            });
            
            // æ›´æ–°å›¾è¡¨æ•°æ®
            function updateLabeledChart() {
                const xMin = parseFloat(xMinSlider.value);
                const xMax = parseFloat(xMaxSlider.value);
                
                // ç”Ÿæˆæ–°çš„æ•°æ®èŒƒå›´
                const x = [];
                const sin = [];
                const cos = [];
                
                for (let i = xMin; i <= xMax; i += 0.1) {
                    x.push(i);
                    sin.push(Math.sin(i));
                    cos.push(Math.cos(i));
                }
                
                charts.labeled.data.labels = x;
                charts.labeled.data.datasets[0].data = sin;
                charts.labeled.data.datasets[1].data = cos;
                
                charts.labeled.options.scales.x.min = xMin;
                charts.labeled.options.scales.x.max = xMax;
                
                charts.labeled.update();
            }
            
            xMinSlider.addEventListener('input', updateLabeledChart);
            xMaxSlider.addEventListener('input', updateLabeledChart);
            
            // åŠ¨ç”»æŒ‰é’®
            animateLabelsBtn.addEventListener('click', function() {
                const xMin = parseFloat(xMinSlider.value);
                const xMax = parseFloat(xMaxSlider.value);
                
                // ä½¿ç”¨anime.jsåˆ›å»ºåŠ¨ç”»æ•ˆæœ
                anime({
                    targets: [xMinSlider, xMaxSlider],
                    value: [xMin * 0.7, xMax * 1.3],
                    duration: 2000,
                    easing: 'easeInOutQuad',
                    round: 1,
                    update: function() {
                        updateLabeledChart();
                    }
                });
            });
            
            // é‡ç½®æŒ‰é’®
            resetLabelsBtn.addEventListener('click', function() {
                xMinSlider.value = -3;
                xMaxSlider.value = 3;
                xMinValue.textContent = '-3';
                xMaxValue.textContent = '3';
                
                updateLabeledChart();
            });
            
            // ç”µå½±æ’è¡Œæ¦œæ§ä»¶
            const animateMoviesBtn = document.getElementById('animate-movies');
            const resetMoviesBtn = document.getElementById('reset-movies');
            
            // åŠ¨ç”»æŒ‰é’®
            animateMoviesBtn.addEventListener('click', function() {
                // éšæœºè°ƒæ•´æ•°æ®
                const inputs = document.querySelectorAll('.box-office-input');
                
                anime({
                    targets: inputs,
                    value: function(el) {
                        const currentValue = parseFloat(el.value);
                        return Math.max(0, currentValue * (0.8 + Math.random() * 0.4));
                    },
                    duration: 2000,
                    easing: 'easeInOutQuad',
                    round: 2,
                    update: function() {
                        updateMovieData();
                    }
                });
            });
            
            // é‡ç½®æŒ‰é’®
            resetMoviesBtn.addEventListener('click', function() {
                // æ¢å¤åŸå§‹æ•°æ®
                movieData = [
                    { name: "å“ªå’ä¹‹é­”ç«¥é™ä¸–", boxOffice: 48.57 },
                    { name: "æµæµªåœ°çƒ", boxOffice: 46.18 },
                    { name: "å¤ä»‡è€…è”ç›Ÿ4:ç»ˆå±€ä¹‹æˆ˜", boxOffice: 42.05 },
                    { name: "ç–¯ç‹‚çš„å¤–æ˜Ÿäºº", boxOffice: 21.83 },
                    { name: "é£é©°äººç”Ÿ", boxOffice: 17.03 },
                    { name: "çƒˆç«è‹±é›„", boxOffice: 16.70 },
                    { name: "èœ˜è››ä¾ :è‹±é›„è¿œå¾", boxOffice: 14.01 },
                    { name: "é€Ÿåº¦ä¸æ¿€æƒ…:ç‰¹åˆ«è¡ŒåŠ¨", boxOffice: 13.84 },
                    { name: "æ‰«æ¯’2å¤©åœ°å¯¹å†³", boxOffice: 12.85 },
                    { name: "å¤§é»„èœ‚", boxOffice: 11.38 },
                    { name: "æƒŠå¥‡é˜Ÿé•¿", boxOffice: 10.25 },
                    { name: "æ¯”æ‚²ä¼¤æ›´æ‚²ä¼¤çš„æ•…äº‹", boxOffice: 9.46 },
                    { name: "å“¥æ–¯æ‹‰2:æ€ªå…½ä¹‹ç‹", boxOffice: 9.27 },
                    { name: "é˜¿ä¸½å¡”:æˆ˜æ–—å¤©ä½¿", boxOffice: 8.88 },
                    { name: "é“¶æ²³è¡¥ä¹ ç­", boxOffice: 8.64 }
                ];
                
                populateMovieTable();
                updateMovieChart();
            });
        }

        // å¯¼èˆªåŠŸèƒ½
        function showAllCharts() {
            document.querySelectorAll('.chart-card').forEach(card => {
                card.style.display = 'block';
            });
            updateNavTabs('all');
        }

        function showChart(type) {
            document.querySelectorAll('.chart-card').forEach(card => {
                card.style.display = card.dataset.type === type ? 'block' : 'none';
            });
            updateNavTabs(type);
        }

        function updateNavTabs(activeType) {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            if (activeType === 'all') {
                document.querySelector('.nav-tab').classList.add('active');
            } else {
                document.querySelector(`.nav-tab[onclick="showChart('${activeType}')"]`).classList.add('active');
            }
        }

        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                alert(`æ–‡ä»¶ "${file.name}" å·²é€‰æ‹©ï¼Œå‡†å¤‡è¿›è¡Œå¯è§†åŒ–åˆ†æ...`);
                // è¿™é‡Œå¯ä»¥æ·»åŠ æ–‡ä»¶è§£æå’Œå›¾è¡¨ç”Ÿæˆçš„é€»è¾‘
            }
        });
    </script>
</body>
</html>
